(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{2998:(e,t,a)=>{Promise.resolve().then(a.bind(a,9409))},9409:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),i=a(2115),l=a(63),n=a(247);function o(e){let{params:t}=e,a=(0,l.useRouter)(),[o,r]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),[h,u]=(0,i.useState)(""),f=t.id&&"new"!==t.id;(0,i.useEffect)(()=>{f&&(d(!0),fetch("/api/admin/blogs/".concat(t.id)).then(async e=>{if(!e.ok)throw Error(await e.text()||"Failed to fetch blog");return e.json()}).then(e=>r(e)).catch(e=>u(e.message)).finally(()=>d(!1)))},[t.id]);let m=async e=>{try{if(!(await fetch("/api/admin/blogs/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update blog");a.push("/admin/blogs")}catch(e){alert(e instanceof Error?e.message:"Failed to update blog")}};return c?(0,s.jsx)("p",{className:"p-6",children:"Loading blog..."}):h?(0,s.jsxs)("p",{className:"p-6 text-red-500",children:["Error: ",h]}):(0,s.jsx)("div",{className:"p-6 bg-gray-100 min-h-screen flex justify-center items-start",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Edit Blog"}),(0,s.jsx)(n.A,{initialData:null!=o?o:void 0,onSubmit:m,onClose:()=>a.push("/admin/blogs")})]})})}}},e=>{e.O(0,[96,76,358],()=>e(e.s=2998)),_N_E=e.O()}]);